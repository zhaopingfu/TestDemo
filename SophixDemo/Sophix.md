
### Sophix

`AndFix` 在 `GitHub` 上的最后一次提交记录是在三年前了，而且提的很多 `issue` 也没有人回复，估计是放弃这个方案了，在推 `Sophix` .

`Sophix`:

    支持方法级别的修复
 
    支持资源的修改，添加
    
    补丁包较小
    
    傻瓜式接入

看了下官网的介绍，然后自己集成了一下他的SDK，模拟了几个问题，依次生成补丁包，修复，走了一遍流程

我这里试了三个版本的 `4.4`、 `6.0`、 `9.0` 的都可以成功修复

补丁是对应的指定版本走的，假如

#### 生成补丁包：(为了使新旧两个包使用同样的混淆规则，需要以下步骤)

[生成补丁失败检查步骤](https://help.aliyun.com/knowledge_detail/59422.html)

    1. 打有问题的包的时候需要在 proguard-rules.pro 中 打开 -printmapping mapping.txt 关闭 -applymapping mapping.txt
    
    2. 打完有问题的包之后需要把 mapping.txt 文件拷贝到 app/目录下， 然后把上面的两个配置切换
    
    3. 再打修复了问题的包
    
    4. 之后再生成补丁

#### 缺点
	
	1. 不支持添加四大组件

	2. 不支持 修改 AndroidManifest.xml

	3. Application中不得使用非Android SDK 的方法
	
	4. 获取到有补丁之后大概率会强制走冷启动，重新打开的时候修复问题
	
	    文档中的说法是：代码若变动小，一般会走即时生效热修复，而如果代码变动大，比如在已存在的类中新增方法，修改了so等情况，都会走冷启动。这是由打包工具自行检测代码变化来判断的
	
	4. 在application的onCreate中会去请求有没有新的补丁，如果还没请求到数据就闪退了，那么就没办法了, 所以需要在启动页面拖着时间，保证能够顺利请求到补丁

#### 冷启动热启动

默认不会强制杀死APP，但是有些问题只有冷启动之后才会被修复

    1. 只改不增方法，热启动 当前页面的修复不了，新的页面可以修复

    2. 新增方法，冷启动才能修复